(function ($jq) {
if(document.createElement("picture"),window.matchMedia||(window.matchMedia=function(){"use strict";var e=window.styleMedia||window.media;if(!e){var t=document.createElement("style"),n=document.getElementsByTagName("script")[0],o=null;t.type="text/css",t.id="matchmediajs-test",n.parentNode.insertBefore(t,n),o="getComputedStyle"in window&&window.getComputedStyle(t,null)||t.currentStyle,e={matchMedium:function(e){var n="@media "+e+"{ #matchmediajs-test { width: 1px; } }";return t.styleSheet?t.styleSheet.cssText=n:t.textContent=n,"1px"===o.width}}}return function(t){return{matches:e.matchMedium(t||"all"),media:t||"all"}}}()),function(e,t,n){"use strict";function o(e){var t,n,o,i,s,a=e||{};t=a.elements||r.getAllElements();for(var l=0,c=t.length;c>l;l++)if(n=t[l],o=n.parentNode,i=void 0,s=void 0,"IMG"===n.nodeName.toUpperCase()&&(n[r.ns]||(n[r.ns]={}),a.reevaluate||!n[r.ns].evaluated)){if("PICTURE"===o.nodeName.toUpperCase()){if(r.removeVideoShim(o),i=r.getMatch(n,o),i===!1)continue}else i=void 0;("PICTURE"===o.nodeName.toUpperCase()||n.srcset&&!r.srcsetSupported||!r.sizesSupported&&n.srcset&&n.srcset.indexOf("w")>-1)&&r.dodgeSrcset(n),i?(s=r.processSourceSet(i),r.applyBestCandidate(s,n)):(s=r.processSourceSet(n),(void 0===n.srcset||n[r.ns].srcset)&&r.applyBestCandidate(s,n)),n[r.ns].evaluated=!0}}function i(){function n(){var t;e._picturefillWorking||(e._picturefillWorking=!0,e.clearTimeout(t),t=e.setTimeout(function(){o({reevaluate:!0}),e._picturefillWorking=!1},60))}o();var i=setInterval(function(){return o(),/^loaded|^i|^c/.test(t.readyState)?void clearInterval(i):void 0},250);e.addEventListener?e.addEventListener("resize",n,!1):e.attachEvent&&e.attachEvent("onresize",n)}if(e.HTMLPictureElement)return void(e.picturefill=function(){});t.createElement("picture");var r={};r.ns="picturefill",function(){r.srcsetSupported="srcset"in n,r.sizesSupported="sizes"in n}(),r.trim=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},r.endsWith=function(e,t){return e.endsWith?e.endsWith(t):-1!==e.indexOf(t,e.length-t.length)},r.restrictsMixedContent=function(){return"https:"===e.location.protocol},r.matchesMedia=function(t){return e.matchMedia&&e.matchMedia(t).matches},r.getDpr=function(){return e.devicePixelRatio||1},r.getWidthFromLength=function(e){e=e&&e.indexOf("%")>-1==0&&(parseFloat(e)>0||e.indexOf("calc(")>-1)?e:"100vw",e=e.replace("vw","%"),r.lengthEl||(r.lengthEl=t.createElement("div"),r.lengthEl.style.cssText="border:0;display:block;font-size:1em;left:0;margin:0;padding:0;position:absolute;visibility:hidden"),r.lengthEl.style.width=e,t.body.appendChild(r.lengthEl),r.lengthEl.className="helper-from-picturefill-js",r.lengthEl.offsetWidth<=0&&(r.lengthEl.style.width=t.documentElement.offsetWidth+"px");var n=r.lengthEl.offsetWidth;return t.body.removeChild(r.lengthEl),n},r.types={},r.types["image/jpeg"]=!0,r.types["image/gif"]=!0,r.types["image/png"]=!0,r.types["image/svg+xml"]=t.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),r.types["image/webp"]=function(){var e="image/webp";n.onerror=function(){r.types[e]=!1,o()},n.onload=function(){r.types[e]=1===n.width,o()},n.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="},r.verifyTypeSupport=function(e){var t=e.getAttribute("type");return null===t||""===t?!0:"function"==typeof r.types[t]?(r.types[t](),"pending"):r.types[t]},r.parseSize=function(e){var t=/(\([^)]+\))?\s*(.+)/g.exec(e);return{media:t&&t[1],length:t&&t[2]}},r.findWidthFromSourceSize=function(e){for(var t,n=r.trim(e).split(/\s*,\s*/),o=0,i=n.length;i>o;o++){var s=n[o],a=r.parseSize(s),l=a.length,c=a.media;if(l&&(!c||r.matchesMedia(c))){t=l;break}}return r.getWidthFromLength(t)},r.parseSrcset=function(e){for(var t=[];""!==e;){e=e.replace(/^\s+/g,"");var n,o=e.search(/\s/g),i=null;if(-1!==o){n=e.slice(0,o);var r=n.slice(-1);if((","===r||""===n)&&(n=n.replace(/,+$/,""),i=""),e=e.slice(o+1),null===i){var s=e.indexOf(",");-1!==s?(i=e.slice(0,s),e=e.slice(s+1)):(i=e,e="")}}else n=e,e="";(n||i)&&t.push({url:n,descriptor:i})}return t},r.parseDescriptor=function(e,t){var n,o=t||"100vw",i=e&&e.replace(/(^\s+|\s+$)/g,""),s=r.findWidthFromSourceSize(o);if(i)for(var a=i.split(" "),l=a.length-1;l>=0;l--){var c=a[l],u=c&&c.slice(c.length-1);if("h"!==u&&"w"!==u||r.sizesSupported){if("x"===u){var d=c&&parseFloat(c,10);n=d&&!isNaN(d)?d:1}}else n=parseFloat(parseInt(c,10)/s)}return n||1},r.getCandidatesFromSourceSet=function(e,t){for(var n=r.parseSrcset(e),o=[],i=0,s=n.length;s>i;i++){var a=n[i];o.push({url:a.url,resolution:r.parseDescriptor(a.descriptor,t)})}return o},r.dodgeSrcset=function(e){e.srcset&&(e[r.ns].srcset=e.srcset,e.removeAttribute("srcset"))},r.processSourceSet=function(e){var t=e.getAttribute("srcset"),n=e.getAttribute("sizes"),o=[];return"IMG"===e.nodeName.toUpperCase()&&e[r.ns]&&e[r.ns].srcset&&(t=e[r.ns].srcset),t&&(o=r.getCandidatesFromSourceSet(t,n)),o},r.applyBestCandidate=function(e,t){var n,o,i;e.sort(r.ascendingSort),o=e.length,i=e[o-1];for(var s=0;o>s;s++)if(n=e[s],n.resolution>=r.getDpr()){i=n;break}if(i&&!r.endsWith(t.src,i.url))if(r.restrictsMixedContent()&&"http:"===i.url.substr(0,"http:".length).toLowerCase())void 0!==typeof console&&console.warn("Blocked mixed content image "+i.url);else{t.src=i.url,t.currentSrc=t.src;var a=t.style||{},l="webkitBackfaceVisibility"in a,c=a.zoom;l&&(a.zoom=".999",l=t.offsetWidth,a.zoom=c)}},r.ascendingSort=function(e,t){return e.resolution-t.resolution},r.removeVideoShim=function(e){var t=e.getElementsByTagName("video");if(t.length){for(var n=t[0],o=n.getElementsByTagName("source");o.length;)e.insertBefore(o[0],n);n.parentNode.removeChild(n)}},r.getAllElements=function(){for(var e=[],n=t.getElementsByTagName("img"),o=0,i=n.length;i>o;o++){var s=n[o];("PICTURE"===s.parentNode.nodeName.toUpperCase()||null!==s.getAttribute("srcset")||s[r.ns]&&null!==s[r.ns].srcset)&&e.push(s)}return e},r.getMatch=function(e,t){for(var n,o=t.childNodes,i=0,s=o.length;s>i;i++){var a=o[i];if(1===a.nodeType){if(a===e)return n;if("SOURCE"===a.nodeName.toUpperCase()){null!==a.getAttribute("src")&&void 0!==typeof console&&console.warn("The `src` attribute is invalid on `picture` `source` element; instead, use `srcset`.");var l=a.getAttribute("media");if(a.getAttribute("srcset")&&(!l||r.matchesMedia(l))){var c=r.verifyTypeSupport(a);if(c===!0){n=a;break}if("pending"===c)return!1}}}}return n},i(),o._=r,"object"==typeof module&&"object"==typeof module.exports?module.exports=o:"function"==typeof define&&define.amd?define(function(){return o}):"object"==typeof e&&(e.picturefill=o)}(this,this.document,new this.Image),function(e){e.fn.hoverIntent=function(t,n,o){var i={interval:100,sensitivity:7,timeout:0};i="object"==typeof t?e.extend(i,t):e.isFunction(n)?e.extend(i,{over:t,out:n,selector:o}):e.extend(i,{over:t,out:t,selector:n});var r,s,a,l,c=function(e){r=e.pageX,s=e.pageY},u=function(t,n){return n.hoverIntent_t=clearTimeout(n.hoverIntent_t),Math.abs(a-r)+Math.abs(l-s)<i.sensitivity?(e(n).off("mousemove.hoverIntent",c),n.hoverIntent_s=1,i.over.apply(n,[t])):(a=r,l=s,n.hoverIntent_t=setTimeout(function(){u(t,n)},i.interval),void 0)},d=function(e,t){return t.hoverIntent_t=clearTimeout(t.hoverIntent_t),t.hoverIntent_s=0,i.out.apply(t,[e])},f=function(t){var n=jQuery.extend({},t),o=this;o.hoverIntent_t&&(o.hoverIntent_t=clearTimeout(o.hoverIntent_t)),"mouseenter"==t.type?(a=n.pageX,l=n.pageY,e(o).on("mousemove.hoverIntent",c),1!=o.hoverIntent_s&&(o.hoverIntent_t=setTimeout(function(){u(n,o)},i.interval))):(e(o).off("mousemove.hoverIntent",c),1==o.hoverIntent_s&&(o.hoverIntent_t=setTimeout(function(){d(n,o)},i.timeout)))};return this.on({"mouseenter.hoverIntent":f,"mouseleave.hoverIntent":f},i.selector)}}(jQuery),"object"!=typeof g_menu||!g_menu)var g_menu={};g_menu.functions={makeCORSRequest:function(e,t,n,o){var i="header"==e?"zh"==t?"5006664":"5005226":"zh"==t?"5007080":"5005228",r=new XMLHttpRequest;"withCredentials"in r?r.open("GET","http://live.toggle.sg/en/blueprint/servlet/toggle/commonHeaderFooter?contentID="+i+"&view=asTeaser",!0):"undefined"!=typeof XDomainRequest?(r=new XDomainRequest,r.open("GET","http://live.toggle.sg/en/blueprint/servlet/toggle/commonHeaderFooter?contentID="+i+"&view=asTeaser")):r=null,r?(r.timeout=0,r.ontimeout=function(){},r.onprogress=function(){},r.onload=function(){o||(o={}),o.responseText=r.responseText,n(o)},r.onerror=function(){window.console&&window.console.log&&window.console.log("Error occurred when making CORS request")},setTimeout(function(){r.send()},100)):window.console&&window.console.log&&window.console.log("CORS is not supported")},footer:function(e){function t(e,t){isNaN(e)||($(window).width()>e?(r(t),n(t)):(i(t),o(t)))}function n(e){e.find(".collapsible__toggle").hide()}function o(e){e.find(".collapsible__toggle").show()}function i(e){var t=e.find(".collapsible__body");e.addClass("is-collapsed"),t.slideUp("400")}function r(e){var t=e.find(".collapsible__body"),n=e.find("[data-dotdot]");e.removeClass("is-collapsed"),t.slideDown("400"),setTimeout(function(){n.truncateToHeight()},400)}if(e&&"object"==typeof e){$response=$(e.responseText);var s=$("<div></div>").html(e.responseText);s.prependTo("#toggle-footer"),$("body").addClass("light-theme"),$(".collapsible").each(function(e,n){var o,s=$(n).attr("data-collapse-till");switch(s){case"small":o=479;break;case"medium":o=759;break;case"m-large":o=979;break;case"large":o=1023;break;case"":o=null;default:o=parseInt(s)}t(o,$(n)),$(window).resize(function(){t(o,$(n))}),$(n).on("click",".collapsible__toggle",function(){var e=$(this).closest(".collapsible"),t=e.hasClass("is-collapsed");t?r(e):i(e)})})}},header:function(e){function t(e){e.preventDefault();var t=$(this),n=t.find("a"),o=n.attr("class").split(" ")[0];u.hasClass("is-open")||u.addClass("is-open"),u.attr("data-background",o),d.find("a").removeClass("is-active"),t.find("a").addClass("is-active"),$(".megamenu__item").hide().eq(t.index()).show().find("li").removeClass("is-active").eq(0).addClass("is-active"),r(f.eq(t.index()).find("li").eq(0))}function n(e){var t=$(e).parent().find(":hover");return t.length}function o(){}function i(){setTimeout(function(){var e=u.find(".megamenu__item"),t=n(d[0]),o=n(u[0]);o||t||(u.removeClass("is-open"),setTimeout(function(){e.removeClass("is-open"),d.find("li").find("a").removeClass("is-active")},300))},1)}function r(e){var t=e.find(".l-4up"),n=t.attr("data-url")||null,o=t.attr("data-fetch-completed")||null;n&&!o&&$.ajax({url:n}).done(function(e){t.append(e),picturefill({reevaluate:!0}),t.attr("data-fetch-completed","true")})}if(e&&"object"==typeof e){var s=$("<div></div>").html(e.responseText);s.find("#accountNotLogin, #account").remove(),s.prependTo("#toggle-header");var a=$(".search-form-holder"),l=a.find(".search-form");$(".search-button").on("click",function(e){e.preventDefault(),$(".search-form-holder").addClass("is-open"),$(".search-form").find("input").focus()}),$(".search-close").on("click",function(e){e.preventDefault(),e.stopPropagation(),a.removeClass("is-open"),l.find("input").focusout()});var c=function(){var e=$.trim($(".search-input-field").val());$(".search-input-field").val(e),""!==e&&$(".search-form").submit()};$(".search-submit-button").on("click",function(e){e.preventDefault(),e.stopPropagation(),c()}),$(".search-input-field").keypress(function(e){13==e.which&&(e.preventDefault(),c())}),$(document).on("click","#primary-nav-toggle",function(){$("body").toggleClass("primary-menu-open")}),$(document).on("click",".has-children",function(){$(this).find("ul").toggleClass("is-open")});var u=$(".mega-menu--primary-nav"),d=$(".nav"),f=u.find(".megamenu__item");$(".nav").hoverIntent({over:t,out:i,selector:"li",timeout:500}),u.hoverIntent({over:o,out:i,timeout:500}),u.find("li").on("mouseenter",function(e){return e.preventDefault(),r($(this)),$(this).addClass("is-active").siblings().removeClass("is-active hover-on-more"),$(this).hasClass("more")?($(this).siblings().eq(0).addClass("is-active hover-on-more"),!1):void 0}),u.find("li").on("mouseleave",function(e){e.preventDefault(),$(this).hasClass("more")&&($(this).removeClass("is-active"),$(this).siblings().removeClass("hover-on-more"))})}}},jQuery(document).ready(function(e){function t(){return navigator.userAgent.match(/Mobi/)||e(window).width()<769?!0:void 0}t()||e("body").addClass("is-desktop"),e(window).resize(function(){t()?e("body").removeClass("is-desktop"):e("body").addClass("is-desktop")})});
})(jQuery);
